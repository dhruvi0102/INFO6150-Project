{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhruv\\\\OneDrive\\\\Documents\\\\GitHub\\\\INFO6150-Project\\\\Client\\\\src\\\\Fleet\\\\pages\\\\FleetSearchPage.jsx\";\nimport React, { useEffect, useState, useRef, Fragment, useContext } from 'react';\nimport axios from '../../axios';\nimport gsap from 'gsap';\nimport { useParams } from 'react-router-dom';\nimport { ThemeContext, themes } from '../../shared/contexts/ThemeContext';\nimport PreLoader from '../../shared/components/PreLoader/PreLoader';\nimport Layout from '../../shared/components/Layout/Layout';\nimport FleetList from '../components/FleetList';\nimport Pagination from '../../shared/components/Pagination/Pagination';\nconst FleetSearchPage = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [searched, setSearched] = useState([]);\n  const [currentPage, setCurrenPage] = useState(1);\n  const itemsPerPage = 6;\n  let tl = useRef();\n  let searchTitle = useRef(null);\n  const name = useParams().name;\n  console.log(name);\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentItems = searched.slice(indexOfFirstItem, indexOfLastItem);\n  useEffect(() => {\n    tl.current = gsap.timeline();\n    tl.current.from(searchTitle, 1, {\n      y: -20,\n      opacity: 0\n    });\n  }, []);\n  useEffect(() => {\n    setIsLoading(true);\n    axios.get(`/fleet/sort/${name}`).then(res => {\n      setIsLoading(false);\n      setSearched(res.data.rental);\n      console.log(res);\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, [name]);\n  const onPaginationHandler = number => {\n    setCurrenPage(number);\n  };\n  let offers;\n  if (searched.length) {\n    offers = /*#__PURE__*/React.createElement(\"p\", {\n      className: \"offer-counter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 18\n      }\n    }, \"we have \", searched.length, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, \" \", searched.length === 1 ? 'offer' : 'offers', \" \"), \"for you\");\n  }\n  const {\n    currentTheme,\n    toggleTheme\n  } = useContext(ThemeContext);\n  console.log(currentTheme);\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    ref: el => searchTitle = el,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, \"don't dream it, Drive it!\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"line\",\n    style: {\n      backgroundColor: currentTheme.cardBorderBottomColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  })), offers, isLoading ? /*#__PURE__*/React.createElement(PreLoader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FleetList, {\n    fleet: currentItems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }), searched.length > 6 && /*#__PURE__*/React.createElement(Pagination, {\n    totalItems: searched.length,\n    itemsPerPage: itemsPerPage,\n    pagination: onPaginationHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  })));\n};\nexport default FleetSearchPage;","map":{"version":3,"names":["React","useEffect","useState","useRef","Fragment","useContext","axios","gsap","useParams","ThemeContext","themes","PreLoader","Layout","FleetList","Pagination","FleetSearchPage","isLoading","setIsLoading","searched","setSearched","currentPage","setCurrenPage","itemsPerPage","tl","searchTitle","name","console","log","indexOfLastItem","indexOfFirstItem","currentItems","slice","current","timeline","from","y","opacity","get","then","res","data","rental","catch","err","onPaginationHandler","number","offers","length","currentTheme","toggleTheme","el","backgroundColor","cardBorderBottomColor"],"sources":["C:/Users/dhruv/OneDrive/Documents/GitHub/INFO6150-Project/Client/src/Fleet/pages/FleetSearchPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef, Fragment,  useContext } from 'react';\nimport axios from '../../axios';\nimport gsap from 'gsap';\nimport { useParams } from 'react-router-dom';\nimport { ThemeContext, themes} from '../../shared/contexts/ThemeContext';\nimport PreLoader from '../../shared/components/PreLoader/PreLoader';\nimport Layout from '../../shared/components/Layout/Layout';\nimport FleetList from '../components/FleetList';\nimport Pagination from '../../shared/components/Pagination/Pagination';\n\nconst FleetSearchPage = () => {\n\n    const [ isLoading, setIsLoading ] = useState(false);\n    const [ searched, setSearched ] = useState([]);\n    const [ currentPage, setCurrenPage ] = useState(1);\n    const itemsPerPage = 6;\n    let tl = useRef();\n    let searchTitle = useRef(null);\n    const name = useParams().name;\n    console.log(name);\n\n    const indexOfLastItem = currentPage * itemsPerPage;\n    const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n    const currentItems = searched.slice(indexOfFirstItem, indexOfLastItem);\n\n    useEffect(() => {\n        tl.current = gsap.timeline();\n        tl.current.from(searchTitle, 1,{y: -20, opacity:0})\n    }, []);\n\n      useEffect(() => {\n        setIsLoading(true)\n        axios.get(`/fleet/sort/${name}`)\n             .then(res => {\n                \n                setIsLoading(false);\n                setSearched(res.data.rental);\n                console.log(res);\n             }).catch(err => {\n                setIsLoading(false);\n                console.log(err)\n             });\n    },[name]);\n\n    const onPaginationHandler = (number) => {\n        setCurrenPage(number);      \n    };\n\n    let offers;\n    if(searched.length){\n        offers = <p className='offer-counter'>we have {searched.length} \n        <span> {searched.length ===  1 ? 'offer' : 'offers'} </span>for you</p>\n    }\n\n    const { currentTheme, toggleTheme } = useContext(ThemeContext);\n    console.log(currentTheme);\n    return(\n        <Layout>\n            <div className='title-search'  >\n                <h1 ref={ el => ( searchTitle = el )} >don't dream it, Drive it!</h1>\n                <p className='line' style={{backgroundColor:currentTheme.cardBorderBottomColor}}/>\n            </div>\n            {offers}\n            {\n                isLoading \n                ?   <PreLoader /> \n                :   <Fragment>\n                        <FleetList fleet={currentItems} />\n                        { searched.length > 6 && \n                            <Pagination totalItems={searched.length}\n                            itemsPerPage={itemsPerPage}\n                            pagination={onPaginationHandler}/>\n                        }\n                    </Fragment>\n            }   \n        </Layout>\n    )\n\n}\n\nexport default FleetSearchPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhruv\\\\OneDrive\\\\Documents\\\\GitHub\\\\INFO6150-Project\\\\client\\\\src\\\\Orders\\\\components\\\\OrderSingleItem.jsx\";\nimport React, { Fragment, useState } from 'react';\nimport Modal from '../../shared/components/Modals/Modal';\nimport DeleteWarning from '../../shared/components/DeleteWarning/DeleteWarning';\nimport axios from '../../axios';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Stripe from 'react-stripe-checkout';\nconst OrderSingleItem = props => {\n  const [showWarning, setShowWarning] = useState(false);\n  let startDate = new Date(props.startDate).toLocaleDateString('de-DE');\n  let endDate = new Date(props.endDate).toLocaleDateString('de-DE');\n  let totalPrice;\n  if (props.totalPrice) {\n    totalPrice = props.totalPrice.toFixed(2);\n  }\n  const showDeleteWarning = () => {\n    setShowWarning(true);\n  };\n  const hideDeleteWarning = () => {\n    setShowWarning(false);\n  };\n  const handleToken = async (amount, token) => {\n    try {\n      const body = {\n        email: token.email,\n        source: token.id,\n        amount: amount\n      };\n      await axios.post('/stripe', body);\n      await props.onPayNowHandler();\n      await props.sendInvoiceEmail();\n      toast.success('Payment Successfully Done');\n    } catch (error) {\n      toast.error('Payment Failed please try again');\n      console.log(error.message);\n    }\n  };\n  const tokenHandler = async token => {\n    handleToken(totalPrice * 100, token);\n  };\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, showWarning && /*#__PURE__*/React.createElement(Modal, {\n    removeModal: hideDeleteWarning,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DeleteWarning, {\n    cancel: hideDeleteWarning,\n    delete: props.onDeleteOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-rental\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, props.name, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \" \", props.model)), /*#__PURE__*/React.createElement(\"img\", {\n    src: props.image,\n    alt: \"rental\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-order-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"total-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"Your price:\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 24\n    }\n  }, totalPrice), \"$\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"full-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, props.firstName, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \" \", props.lastName)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"Rent dates from \", startDate, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 43\n    }\n  }, \"to \", endDate)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \"For total of \", props.totalDays, \" days\")), !props.isPayNow ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"off-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"Pay now and get 10% off \") : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"off-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Proceed to checkout \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, !props.isPayNow ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Stripe, {\n    stripeKey: \"pk_test_51MButaKxBMJbdAZArgRSLCR7lu19N6WN0g2hngQA6e1cnLlVUvYdbDzVIMG8MPHO5YGLEBcDff8m1fkQSr7ITjCs00Zfnrumtz\",\n    token: tokenHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"button-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, \"Pay Now\"))) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"button-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"Already Paid\")), /*#__PURE__*/React.createElement(\"p\", {\n    onClick: showDeleteWarning,\n    className: \"button-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"Delete\")))), /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }));\n};\nexport default OrderSingleItem;","map":{"version":3,"names":["React","Fragment","useState","Modal","DeleteWarning","axios","ToastContainer","toast","Stripe","OrderSingleItem","props","showWarning","setShowWarning","startDate","Date","toLocaleDateString","endDate","totalPrice","toFixed","showDeleteWarning","hideDeleteWarning","handleToken","amount","token","body","email","source","id","post","onPayNowHandler","sendInvoiceEmail","success","error","console","log","message","tokenHandler","onDeleteOrder","name","model","image","firstName","lastName","totalDays","isPayNow"],"sources":["C:/Users/dhruv/OneDrive/Documents/GitHub/INFO6150-Project/client/src/Orders/components/OrderSingleItem.jsx"],"sourcesContent":["import React, { Fragment, useState } from 'react';\r\nimport Modal from '../../shared/components/Modals/Modal';\r\nimport DeleteWarning from '../../shared/components/DeleteWarning/DeleteWarning';\r\nimport axios from '../../axios';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Stripe from 'react-stripe-checkout';\r\n\r\nconst OrderSingleItem = (props) => {\r\n  const [showWarning, setShowWarning] = useState(false);\r\n\r\n  let startDate = new Date(props.startDate).toLocaleDateString('de-DE');\r\n  let endDate = new Date(props.endDate).toLocaleDateString('de-DE');\r\n\r\n  let totalPrice;\r\n  if (props.totalPrice) {\r\n    totalPrice = props.totalPrice.toFixed(2);\r\n  }\r\n\r\n  const showDeleteWarning = () => {\r\n    setShowWarning(true);\r\n  };\r\n\r\n  const hideDeleteWarning = () => {\r\n    setShowWarning(false);\r\n  };\r\n\r\n  const handleToken = async (amount, token) => {\r\n    try {\r\n      const body = {\r\n        email: token.email,\r\n        source: token.id,\r\n        amount: amount,\r\n      };\r\n      await axios.post('/stripe', body);\r\n      await props.onPayNowHandler();\r\n      await props.sendInvoiceEmail();\r\n      toast.success('Payment Successfully Done');\r\n    } catch (error) {\r\n      toast.error('Payment Failed please try again');\r\n      console.log(error.message);\r\n    }\r\n  };\r\n\r\n  const tokenHandler = async (token) => {\r\n    handleToken(totalPrice * 100, token);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {showWarning && (\r\n        <Modal removeModal={hideDeleteWarning}>\r\n          <DeleteWarning\r\n            cancel={hideDeleteWarning}\r\n            delete={props.onDeleteOrder}\r\n          />\r\n        </Modal>\r\n      )}\r\n      <div className='order-card'>\r\n        <div className='item-rental'>\r\n          <p className='name'>\r\n            {props.name}\r\n            <span> {props.model}</span>\r\n          </p>\r\n          <img src={props.image} alt='rental' />\r\n        </div>\r\n        <div className='main-order-wrapper'>\r\n          <p className='total-price'>\r\n            Your price:<span>{totalPrice}</span>$\r\n          </p>\r\n          <p className='full-name'>\r\n            {props.firstName}\r\n            <span> {props.lastName}</span>\r\n          </p>\r\n          <div className='order-info'>\r\n            <p>\r\n              Rent dates from {startDate} <span>to {endDate}</span>\r\n            </p>\r\n            <p>For total of {props.totalDays} days</p>\r\n          </div>\r\n          {!props.isPayNow ? (\r\n            <p className='off-message'>Pay now and get 10% off </p>\r\n          ) : (\r\n            <p className='off-message'>Proceed to checkout </p>\r\n          )}\r\n          <div className='buttons'>\r\n            {!props.isPayNow ? (\r\n              <Fragment>\r\n                {/* <p onClick={props.onPayNowHandler} className=\"button-action\"> */}\r\n                <Stripe\r\n                  stripeKey='pk_test_51MButaKxBMJbdAZArgRSLCR7lu19N6WN0g2hngQA6e1cnLlVUvYdbDzVIMG8MPHO5YGLEBcDff8m1fkQSr7ITjCs00Zfnrumtz'\r\n                  token={tokenHandler}\r\n                >\r\n                  <p className='button-action'>Pay Now</p>\r\n                </Stripe>\r\n                {/* <p onClick={props.onInvoicePdf} className=\"button-action\">\r\n                  Pay Later\r\n                </p> */}\r\n              </Fragment>\r\n            ) : (\r\n              <Fragment>\r\n                <p className='button-action'>Already Paid</p>\r\n                {/* <p onClick={props.sendInvoiceEmail} className=\"button-action\">\r\n                  Checkout\r\n                </p> */}\r\n              </Fragment>\r\n            )}\r\n            <p onClick={showDeleteWarning} className='button-action'>\r\n              Delete\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ToastContainer />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default OrderSingleItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}